# ui-style.md — McCall UI Style Guide

スタイル：macOSネイティブ・クワイエットUI  
狙い：作業の“背景”になる。主張しない。迷わせない。疲れさせない。

---

## 0. 設計原則（ぶれないための憲法）
1. **静かさが価値**  
   目立つ演出・色・影・動きは「集中の敵」。必要最小限だけ許可。
2. **判断コストをゼロに近づける**  
   ユーザーが毎回「どうする？」を考えないUIにする。選択肢を増やすほど失敗する。
3. **キーボードファースト**  
   操作はショートカットで完結。マウスは“逃げ道”。
4. **macOSに寄せる（独自テーマにしない）**  
   セマンティックカラー・SF・標準コントロールを基本とし、OSのダーク/ライト/アクセントに追随。
5. **情報は3点固定（ステップ名/残り/指示）**  
   実行画面に統計や装飾やリストは置かない。置いた瞬間に負け。

---

## 1. トーン＆ムード
- フォント：SF Pro（システム標準）
- タイマー表示：**Monospaced Digits**（数字の幅ブレを消す）
- 色：**セマンティックカラーのみ**（Primary/Secondary/Background/Separator等）
- アクセント：**1色だけ**（原則：システムアクセントに従う）
- 素材感：必要なら `Material` を**薄く**（ガラスっぽさは上限“軽く”）
- アイコン：SF Symbols のみ
- 影：原則なし（必要ならカードだけ1段）
- アニメ：150ms程度のフェード/スケールのみ。Reduce Motion対応で即時。

---

## 2. デザイン・トークン（統一ルール）
このトークン以外を使ったら、統一は崩れる。例外は禁止。

### 2.1 タイポグラフィ
- Title：18–20 / Semibold（画面タイトル）
- Step名：16 / Semibold（最重要ラベル）
- 指示文：13–14 / Regular（本文）
- タイマー：32–44 / Semibold + **Monospaced Digits**
- 補助：12 / Regular（ログ・小ラベル）

**ヒエラルキー（固定）**
1) タイマー（最大）  
2) ステップ名（中）  
3) 指示文（小）  
※この順番を崩すと視線が迷う。

### 2.2 余白（これだけ使う）
- 4 / 8 / 12 / 16 / 24  
※「なんとなく10」は禁止。

### 2.3 角丸
- カード/パネル：12
- ボタン：10
- バッジ（ピル）：999

### 2.4 色（セマンティックのみ）
- Text：Primary / Secondary / Tertiary
- 背景：SystemBackground / SecondarySystemBackground
- 枠線：Separator
- 状態表現（派手な色分け禁止）
  - running：Accent（強調は控えめに）
  - paused：Secondary（色ではなくトーンで落とす）
  - note：Accentの弱トーン（同色の濃淡で表現）

**禁止事項**
- 赤黄緑で状態表現（うるさくなる）
- グラデーション
- 独自パレットの増殖

### 2.5 影
- 原則なし
- 例外：カードに薄い影1段のみ（視認性が必要な場面だけ）

### 2.6 モーション
- 150ms フェード/スケール（控えめ）
- Reduce Motion ON なら即時（アニメなし）
- タイマーの点滅・脈動は不要（視線を奪う）

---

## 3. 状態（State）表現ルール
UIが “いま何が起きてるか” を静かに伝えるための最小セット。

- Running：タイマーが進む。主要操作は `Pause`。
- Paused：タイマー停止。主要操作は `Resume`。
- Note Gate：確認ダイアログが出て**進行が止まる**。
- Muted：音が鳴らない。メニューバーで状態が一目で分かる。

**原則**
- 状態は「色」より「ラベル/ボタン/アイコン」で表現する  
  色は補助。主役にしない。

---

## 4. コンポーネント定義（これだけで回す）
### 4.1 Step Badge（ピル）
**用途**：現在ステップ名の固定表示  
- 文字：Step名（16 Semibold）
- 背景：SecondarySystemBackground
- 文字色：Primary
- パディング：左右12 / 上下6（目安）
- 角丸：999

**状態**
- Running/Paused/Noteでも色は基本固定（うるささ回避）
- 例外：noteの時だけ薄くAccentトーンの背景（“気づく”程度）

### 4.2 Timer Display
**用途**：残り時間を最大情報として提示  
- フォント：32–44 Semibold + Monospaced Digits
- 表示：`mm:ss` または `m:ss`（揃えを優先するなら常に `mm:ss`）
- 点滅演出：禁止

**アクセシビリティ**
- VoiceOver：`残り 4分32秒` のように読み上げ

### 4.3 Instruction Text
**用途**：次にやることの1〜2行提示  
- 13–14 Regular
- SecondaryText
- 行数：最大2行（はみ出たら省略…）
- 「長文で説明」は禁止（読み始めた瞬間に集中が死ぬ）

### 4.4 Primary Controls（実行中ボタン群）
**用途**：迷わない操作の最小セット  
- 実行中：`Pause`（主） / `Skip`（従） / `Stop`（デストラクティブ・確認付き）
- 停止中：`Start`（主）だけ強調
- ボタンは標準スタイル寄せ（過度なカスタム禁止）
- 角丸：10
- 余白：12 or 16

**キーボード**
- Space：Pause/Resume（推奨）
- ⌘⏎（任意）：Start
- ⌘→（任意）：Skip  
※グローバルショートカットは別途PRD準拠。UI側は表示で補助。

### 4.5 Note Confirm Dialog（要件の中心）
**用途**：noteステップで「メモした/スキップ」の意思決定を強制  
- タイトル：`メモした？`
- 本文：無し or 1行だけ（例：`外部のメモに1行でOK`）
- ボタン：`Done`（デフォルト） / `Skip`
- 重要：**requiredToProceed=true**（選ぶまで次へ進めない）

**キーボード（固定）**
- Enter：Done
- S：Skip
- Esc：閉じない（閉じる＝逃げ道、仕様破壊）

**見た目**
- macOS標準ダイアログに寄せる（独自モーダル禁止）

### 4.6 Menubar Item / Popover（常駐UI）
**用途**：フォーカス外でも現在状態が分かる  
- 表示：`残り時間 + ステップ名(短縮)`（長いのは切る）
- 右端に音状態：`🔈/🔇`（またはSF Symbol）
- クリックでpopover：最小操作（Start/Pause/Skip/Stop + Mute切替）
- 色は使わない（状態はテキストとアイコンで）

---

## 5. 画面（Screen）定義
### 5.1 実行画面（最重要）
レイアウト（固定）
1) 上：Step Badge  
2) 中：Timer Display（最大）  
3) 下：Instruction Text（1〜2行）  
4) 最下：Controls（Pause/Skip/Stop）

**禁止**
- 実行画面にログ一覧・統計・編集ボタンを置く  
  → “やる気”は上がるが“実行率”が落ちる。

### 5.2 ルーチン編集
- 左：ステップ一覧（List）
- 右：ステップ詳細（時間 / ラベル / 指示 / kind / soundOverride）
- 色は使わない。選択状態・区切り線・余白で十分。
- ステップごとのサウンドは `inherit/on/off` を**小さく**見せる（主役にしない）

### 5.3 ログ/振り返り（あるなら）
最初はグラフ不要。カード3つで十分。
- 今日の回数
- 作業合計時間
- note skip率
（必要なら）ミュート率

---

## 6. サウンドUI（うるさくしないためのルール）
あなたは「鳴ってほしい派」なので、デフォルトは鳴るで良い。ただし継続の敵は“切れないこと”。

- グローバルミュート：**メニューバー1クリックで即ON/OFF**
- ルーチンデフォルト：`soundDefault on/off`
- ステップ例外：`soundOverride inherit/on/off`
- 視覚でも成立させる：音が鳴らない環境（集中モード/ミュート）でも破綻させない

**禁止**
- 音源選択UIの作り込み（沼）
- ステップごとに音種を変える（学習コストが上がるだけ）

---

## 7. アクセシビリティ＆品質の最低ライン
- ダーク/ライト対応（自動）
- Dynamic Type（極端な崩れがない程度でOK）
- Reduce Motion 対応（アニメ無効）
- コントラスト：セマンティックカラー利用で担保
- フォーカスリング：macOS標準に従う（消さない）

---

## 8. Do / Don’t（ここを破ると失敗する）
### Do
- 標準UIで“足りる”ところは標準を使う
- タイマー数字はmonospace digit
- 設定は「全体デフォルト + 例外」の二層に抑える
- noteは確認で“止める”（これがプロダクトの核）

### Don’t
- カスタムテーマ・装飾・演出の盛り
- 状態を色で派手に分ける
- 実行画面に情報を足す
- 設定項目を増やし続ける（最初は気持ちいいが、運用で死ぬ）

---

## 9. SwiftUI実装メモ（最低限）
- フォント：`Font.system(size: , weight: )` + `.monospacedDigit()`（タイマーのみ）
- 色：`Color.primary / .secondary / .tertiary`、背景は `Color(nsColor: .windowBackgroundColor)` 等のセマンティック寄せ
- 材質：必要なら `.background(.regularMaterial)` を薄く
- ボタン：破壊系は `Button(role: .destructive)`、標準見た目を尊重
- ダイアログ：標準 `alert` / `confirmationDialog` の範囲で寄せる（独自モーダルを作らない）
- ショートカット表示：`keyboardShortcut` を付ける／UI上でもヒント表示

---
