## 1. Mac用アプリケーション「McCall」実装フロー

AIエージェントは、McCallの実装において以下のステップを厳守してください。

### 1.1 参照ドキュメント

実装前に、必ず以下の仕様書群を読み込み、現在のコードベースと照らし合わせてください。

* `docs/specs/design.md`（設計詳細）
* `docs/specs/prd.md`（製品要求定義）
* `docs/specs/requirements.md`（要件定義）
* `docs/specs/tasks.md`（タスク管理）
* `docs/specs/ui-style.md`（UI/スタイルガイド）

### 1.2 実装手順（ワークフロー）

1. **仕様とコードの同期:** まず上記ドキュメントと現在のコードを読み、実装のコンテキストを把握する。
2. **タスクの特定:** `docs/specs/tasks.md` を確認し、次に着手すべき未完了タスクを特定する。
3. **ステータス更新:** 実装を開始する前に、`docs/specs/tasks.md` 内の該当タスクのステータスを「着手中（In Progress）」などに更新する。
4. **実装:** タスクの内容に基づき、必要なコードを実装する。
5. **テスト作成:** 実装したコードに対して、テストコードを作成する。
6. **検証:** 実装完了後、セクション2の「必須検証コマンド」を実行し、動作を確認する。
7. **完了報告:** 検証にパスしたら、`docs/specs/tasks.md` のステータスを「完了（Done）」に更新する。

## 2. 開発基準およびAIエージェントが遵守すべき検証フロー

本プロジェクトにおける開発基準およびAIエージェントが遵守すべき検証フローを定義します。

### 2.1 開発時必須検証コマンド (Pre-Commit/Pre-Push)

コードの変更を行った際は、以下のコマンドを順次実行し、すべてのチェックをパスさせる必要があります。

#### A. フロントエンド / 基本チェック

| コマンド            | 内容           | 目的                     |
| ------------------- | -------------- | ------------------------ |
| `bun run lint`      | Lint/Format    | コードスタイルの統一     |
| `bun run typecheck` | 型チェック     | TypeScriptの型安全性確保 |
| `bun run test`      | ユニットテスト | フロントエンドの機能検証 |

#### B. Rust (Backend/Core) チェック

| コマンド              | 内容           | 目的                                   |
| --------------------- | -------------- | -------------------------------------- |
| `bun run rust:fmt`    | Rust Format    | Rustコードの整形チェック               |
| `bun run rust:clippy` | Rust Lint      | Rustの静的解析・ベストプラクティス適用 |
| `bun run rust:test`   | Rust Unit Test | Rustロジックの検証                     |

---

### 2.2 マージ前必須チェック (Pre-Merge)

プルリクエストをマージする前、あるいは重要な変更の節目には、上記に加えて以下のビルド確認を必ず行います。

* **本番ビルド確認**
```bash
bun run build

```


> ※ `typecheck`をパスしていても、Vite等のビルドプロセスでエラーが出る可能性があるため、必ず実行すること。



---

### 2.3 UI/UX 導線保証 (Optional/Critical Changes)

UIの主要な導線やユーザーフローに変更を加えた場合は、以下のE2Eテストを実行します。

* **E2Eテスト**
```bash
bun run e2e

```


---

### 2.4 検証ショートカット

個別に実行する代わりに、以下のまとめコマンドを利用することを推奨します。

* **標準セット（Lint/型/テスト）:** `bun run ci`
* **フルセット（マージ前推奨）:** `bun run ci && bun run build && bun run e2e`
